<!DOCTYPE html>
<html>
<head>
  <title>Hello World - Cloudflare Pages Example</title>
</head>
<body>
  <h1 id="title"></h1> <!-- This will be populated with title from JSON -->
  <p id="description"></p> <!-- This will be populated with description from JSON -->
  <img id="image-url"> <!-- This will be populated with image URL from JSON -->
  <img id="myImage" src="" alt="Image from JSON" />

  <script>
    fetch("https://muddy-truth-5b42.porobov-p3798.workers.dev/?myKey=foo")
      .then(response => response.json())
      .then(data => {
        console.log(data.adsSnapshot.bigPicBinary)
        const base64Image = data.adsSnapshot.bigPicBinary.toString('base64')
        const title = document.getElementById("title");
        const imgElement = document.getElementById('myImage');
        imgElement.src = `data:image/jpeg;base64,${base64Image}`
      })
      .catch(error => {
        console.error("Failed to fetch JSON data", error);
      });
  </script>
</body>
</html>
